(()=>{"use strict";var e={d:(t,r)=>{for(var n in r)e.o(r,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:r[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t),r:e=>{"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}},t={};e.r(t),e.d(t,{copyChanges:()=>v,hasChanged:()=>p,shortuid:()=>u});var r={};e.r(r),e.d(r,{broadcast:()=>T,createSearchParams:()=>w,getApplicaitonUrl:()=>b,getNodeId:()=>f,getParam:()=>g,getUrl:()=>A,init:()=>C,navigateTo:()=>L,popup:()=>E,setParam:()=>y,subscribe:()=>S,updateLocation:()=>x});var n={};e.r(n),e.d(n,{hideLoadingIndicator:()=>D,openErrorModal:()=>q,renderErrorSection:()=>U,showLoadingIndicator:()=>V});var o={};e.r(o),e.d(o,{RestClient:()=>F,ajaxDelete:()=>K,ajaxFile:()=>G,ajaxGet:()=>J,ajaxPost:()=>B,ajaxPut:()=>W,subscribe:()=>j});var a={};function i(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function s(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function l(e,t,r){return t&&s(e.prototype,t),r&&s(e,r),Object.defineProperty(e,"prototype",{writable:!1}),e}e.r(a),e.d(a,{subscribe:()=>Y,webSocket:()=>$});var d=function(){function e(){i(this,e),this.listeners=[]}return l(e,[{key:"next",value:function(e){if(!this.listeners)throw new Error("EventStream completed");this.last=e,delete this.lastError,this.listeners.forEach((function(t){if(t.next)try{t.next(e)}catch(e){t.error?t.error(e):console.error(e)}}))}},{key:"error",value:function(e){if(!this.listeners)throw new Error("EventStream completed");delete this.last,this.lastError=e;var t=!1;this.listeners.forEach((function(r){if(r.error)try{r.error(e),t=!0}catch(e){console.error(e)}})),t||console.error(e)}},{key:"complete",value:function(){var e=this.listeners;delete this.listeners,e&&e.forEach((function(e){if(e.complete)try{e.complete()}catch(t){e.error?e.error(t):console.error(t)}}))}},{key:"subscribe",value:function(e){var t=this;if("function"==typeof e&&(e={next:e}),this.last&&e.next&&e.next(this.last),this.lastError&&e.error&&e.error(this.lastError),!this.listeners)return e.complete&&e.complete(),null;this.listeners&&this.listeners.push(e);var r=[];return{add:function(e){return r.push(e)},remove:function(e){var t=r.indexOf(e);-1!==t&&r.splice(t,1)},unsubscribe:function(){var n=t.listeners;if(n){var o=n.indexOf(e);-1!==o&&n.splice(o,1)}r.forEach((function(e){return e.unsubscribe()}))}}}}]),e}();function c(e){return c="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},c(e)}function u(){return(Date.now()%4194304+(Math.floor(12582911*Math.random())+4194304)).toString(36)}function p(e,t){if(e===t||void 0===t)return!1;if(null===e&&null!==t||null!==e&&null===t)return!0;if(Array.isArray(e)){if(!Array.isArray(t))return!0;if(e.length!==t.length)return!0;for(var r in e)if(p(e[r],t[r]))return!0;return!1}if("object"===c(e)){if("object"!==c(t))return!0;for(var n in e)if(p(e[n],t[n]))return!0;return!1}return!0}function v(e,t){if(e===t)return!0;var r=!1;if(t)for(var n in e)p(e[n],t[n])&&(e[n]=t[n],r=!0);return r}var h={applicationUrl:null,nodeId:u(),authParams:{}},m=new d;function C(e){var t={};for(var r in e)"authParams"===r?v(h.authParams,e.authParams):Object.prototype.hasOwnProperty.call(h,r)?h[r]=e[r]:t[r]=e[r];m.next(t)}function f(){return h.nodeId}function b(){return h.applicationUrl}function g(e){return h.authParams[e]}function y(e,t){null==t?delete h.authParams[e]:h.authParams[e]=t}function w(e){var t={};return v(t,e),v(t,h.authParams),0===Object.keys(t).length?null:new URLSearchParams(t)}function A(e,t,r){var n=r?void 0:h.applicationUrl,o=w(t);return new URL(o?e+"?"+o:e,n)}function x(e,t,r){window.history.pushState({},"",A(e,t,r))}function E(e,t,r){window.open(A(e,t,r))}function L(e,t,r){window.location=A(e,t,r)}function S(e){return m.subscribe(e)}function T(e){m.next(e)}var P={100:"Continue",101:"Switching Protocols",200:"OK",201:"Created",202:"Accepted",203:"Non-Authoritative Information",204:"No Content",205:"Reset Content",206:"Partial Content",300:"Multiple Choices",301:"Moved Permantently",302:"Found",303:"See Other",304:"Not Modified",305:"Use Proxy",307:"Temporary Redirect",400:"Bad Request",401:"Unauthorized",402:"Payment Required",403:"Forbidden",404:"Not Found",405:"Method Not Allowed",406:"Not Acceptable",407:"Proxy Authentication Required",408:"Request Timeout",409:"Conflict",410:"Gone",411:"Length Required",412:"Precondition Failed",413:"Request Entity Too Large",414:"Request URI Too Long",415:"Unsupported Media Type",416:"Requested Range Not Satisfiable",417:"Expectation Failed",500:"Internal Server Error",501:"Not Implemented",502:"Bad Gateway",503:"Service Unavailable",504:"Gateway Timeout",505:"HTTP Version Not Supported"},k={1e3:"Normal Closure",1001:"Going Away",1002:"Protocol Error",1003:"Cannot Accept",1004:"Reserved",1005:"No Status Code",1006:"Closed Abnormally",1007:"Not Consistent",1008:"Violated Policy",1009:"Too Big",1010:"No Extension",1011:"Unexpected Condition",1012:"Service Restart",1013:"Try Again Later",1014:"TLS Handshake Failure"};function M(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg","path");return r.setAttribute("d",e),r.setAttribute("fill",t),r}function H(e,t){var r=document.createElementNS("http://www.w3.org/2000/svg","svg");return t?(r.setAttribute("height",t),r.setAttribute("widght",t)):r.setAttribute("width","100%"),r.setAttribute("viewBox","0 0 48 48"),r.setAttribute("fill","none"),404===e||410===e||e>=300&&e<400?(r.appendChild(M("M24 48C37.2548 48 48 37.2548 48 24C48 10.7452 37.2548 0 24 0C10.7452 0 0 10.7452 0 24C0 37.2548 10.7452 48 24 48Z","#C9D2D6")),r.appendChild(M("M21.1201 16.3101C21.1201 16.8401 20.6901 17.2701 20.1601 17.2701H13.4301V38.4201H34.5801V9.58008H21.1201V16.3101ZM24.1701 26.3201L28.9201 21.5701C29.0101 21.4801 29.1701 21.4801 29.2601 21.5701L30.2801 22.5901C30.3701 22.6801 30.3701 22.8401 30.2801 22.9301L25.5301 27.6801C25.4401 27.7701 25.4401 27.9301 25.5301 28.0201L30.2801 32.7701C30.3701 32.8601 30.3701 33.0201 30.2801 33.1101L29.2601 34.1301C29.1701 34.2201 29.0101 34.2201 28.9201 34.1301L24.1701 29.3801C24.0801 29.2901 23.9201 29.2901 23.8301 29.3801L19.0801 34.1301C18.9901 34.2201 18.8301 34.2201 18.7401 34.1301L17.7201 33.1101C17.6301 33.0201 17.6301 32.8601 17.7201 32.7701L22.4701 28.0201C22.5601 27.9301 22.5601 27.7701 22.4701 27.6801L17.7201 22.9301C17.6301 22.8401 17.6301 22.6801 17.7201 22.5901L18.7401 21.5701C18.8301 21.4801 18.9901 21.4801 19.0801 21.5701L23.8301 26.3201C23.9201 26.4101 24.0801 26.4101 24.1701 26.3201Z","white")),r.appendChild(M("M19.1899 9.98047L13.8199 15.3505H19.1899V9.98047Z","white")),r.appendChild(M("M35.54 7.65039H20.15H19.19C19.06 7.65039 18.94 7.68039 18.82 7.72039C18.7 7.77039 18.6 7.84039 18.51 7.93039L11.78 14.6604C11.69 14.7504 11.62 14.8504 11.57 14.9704C11.52 15.0904 11.5 15.2104 11.5 15.3404V16.3004V39.3804C11.5 39.9104 11.93 40.3404 12.46 40.3404H35.54C36.07 40.3404 36.5 39.9104 36.5 39.3804V8.62039C36.5 8.08039 36.07 7.65039 35.54 7.65039ZM19.19 9.98039V15.3504H13.82L19.19 9.98039ZM34.58 38.4204H13.42V17.2704H20.15C20.68 17.2704 21.11 16.8404 21.11 16.3104V9.58039H34.57V38.4204H34.58Z","#243142")),r.appendChild(M("M18.74 21.5701L17.72 22.5901C17.63 22.6801 17.63 22.8401 17.72 22.9301L22.47 27.6801C22.56 27.7701 22.56 27.9301 22.47 28.0201L17.72 32.7701C17.63 32.8601 17.63 33.0201 17.72 33.1101L18.74 34.1301C18.83 34.2201 18.99 34.2201 19.08 34.1301L23.83 29.3801C23.92 29.2901 24.08 29.2901 24.17 29.3801L28.92 34.1301C29.01 34.2201 29.17 34.2201 29.26 34.1301L30.28 33.1101C30.37 33.0201 30.37 32.8601 30.28 32.7701L25.53 28.0201C25.44 27.9301 25.44 27.7701 25.53 27.6801L30.28 22.9301C30.37 22.8401 30.37 22.6801 30.28 22.5901L29.26 21.5701C29.17 21.4801 29.01 21.4801 28.92 21.5701L24.17 26.3201C24.08 26.4101 23.92 26.4101 23.83 26.3201L19.08 21.5701C18.99 21.4701 18.83 21.4701 18.74 21.5701Z","#243142"))):401===e||403===e?(r.appendChild(M("M24 48C37.2548 48 48 37.2548 48 24C48 10.7452 37.2548 0 24 0C10.7452 0 0 10.7452 0 24C0 37.2548 10.7452 48 24 48Z","#C9D2D6")),r.appendChild(M("M24 22C22.35 22 21 23.35 21 25C21 26.07 21.56 27.03 22.5 27.58C22.88 27.8 23.07 28.23 22.97 28.66L22.24 32H25.75L25.02 28.66C24.93 28.24 25.12 27.8 25.49 27.58C26.44 27.03 27 26.07 27 25C27 23.35 25.65 22 24 22Z","white")),r.appendChild(M("M16 17H13V28.57C13 34.12 16.6 37.53 24 38.98C31.4 37.52 35 34.12 35 28.57V17H32H16ZM27.98 32.79C28.05 33.09 27.97 33.4 27.78 33.63C27.59 33.86 27.3 34 27 34H21C20.7 34 20.41 33.86 20.22 33.63C20.03 33.39 19.96 33.08 20.02 32.79L20.88 28.89C19.71 27.94 19 26.51 19 25C19 22.24 21.24 20 24 20C26.76 20 29 22.24 29 25C29 26.51 28.29 27.94 27.12 28.89L27.98 32.79Z","white")),r.appendChild(M("M36 15H32.94C32.44 10.51 28.62 7 24 7C19.38 7 15.56 10.51 15.06 15H12C11.45 15 11 15.45 11 16V28.57C11 33.12 13.22 38.96 23.81 40.98C23.88 40.99 23.94 41 24 41C24.06 41 24.12 40.99 24.19 40.98C34.78 38.96 37 33.12 37 28.57V16C37 15.45 36.55 15 36 15ZM24 9C27.52 9 30.44 11.61 30.93 15H17.07C17.56 11.61 20.48 9 24 9ZM35 28.57C35 34.12 31.4 37.53 24 38.98C16.6 37.52 13 34.12 13 28.57V17H16H32H35V28.57Z","#243142")),r.appendChild(M("M29 25C29 22.24 26.76 20 24 20C21.24 20 19 22.24 19 25C19 26.51 19.71 27.94 20.88 28.89L20.02 32.79C19.95 33.09 20.03 33.4 20.22 33.63C20.41 33.86 20.7 34 21 34H27C27.3 34 27.59 33.86 27.78 33.63C27.97 33.39 28.04 33.08 27.98 32.79L27.12 28.89C28.29 27.94 29 26.51 29 25ZM25.5 27.58C25.12 27.8 24.93 28.23 25.03 28.66L25.76 32H22.25L22.98 28.66C23.07 28.24 22.88 27.8 22.51 27.58C21.56 27.03 21 26.07 21 25C21 23.35 22.35 22 24 22C25.65 22 27 23.35 27 25C27 26.07 26.44 27.03 25.5 27.58Z","#243142"))):(r.appendChild(M("M24 48C37.2548 48 48 37.2548 48 24C48 10.7452 37.2548 0 24 0C10.7452 0 0 10.7452 0 24C0 37.2548 10.7452 48 24 48Z","#C9D2D6")),r.appendChild(M("M10.4102 36.69H37.6002V16.75H10.4102V36.69ZM22.5602 26.56L18.0802 22.08C17.9902 21.99 17.9902 21.85 18.0802 21.76L19.0402 20.8C19.1302 20.71 19.2702 20.71 19.3602 20.8L23.8402 25.28C23.9302 25.37 24.0702 25.37 24.1602 25.28L28.6402 20.8C28.7302 20.71 28.8702 20.71 28.9602 20.8L29.9202 21.76C30.0102 21.85 30.0102 21.99 29.9202 22.08L25.4402 26.56C25.3502 26.65 25.3502 26.79 25.4402 26.88L29.9202 31.36C30.0102 31.45 30.0102 31.59 29.9202 31.68L28.9602 32.64C28.8702 32.73 28.7302 32.73 28.6402 32.64L24.1602 28.16C24.0702 28.07 23.9302 28.07 23.8402 28.16L19.3602 32.64C19.2702 32.73 19.1302 32.73 19.0402 32.64L18.0802 31.68C17.9902 31.59 17.9902 31.45 18.0802 31.36L22.5602 26.88C22.6502 26.79 22.6502 26.65 22.5602 26.56Z","white")),r.appendChild(M("M10.4102 14.9403H37.6002V11.3203H10.4102V14.9403ZM18.5602 12.2203C19.0602 12.2203 19.4702 12.6303 19.4702 13.1303C19.4702 13.6303 19.0602 14.0403 18.5602 14.0403C18.0602 14.0403 17.6502 13.6303 17.6502 13.1303C17.6602 12.6203 18.0602 12.2203 18.5602 12.2203ZM15.8402 12.2203C16.3402 12.2203 16.7502 12.6303 16.7502 13.1303C16.7502 13.6303 16.3402 14.0403 15.8402 14.0403C15.3402 14.0403 14.9302 13.6303 14.9302 13.1303C14.9402 12.6203 15.3402 12.2203 15.8402 12.2203ZM13.1202 12.2203C13.6202 12.2203 14.0302 12.6303 14.0302 13.1303C14.0302 13.6303 13.6202 14.0403 13.1202 14.0403C12.6202 14.0403 12.2102 13.6303 12.2102 13.1303C12.2202 12.6203 12.6202 12.2203 13.1202 12.2203Z","white")),r.appendChild(M("M18.0802 31.3599C17.9902 31.4499 17.9902 31.5899 18.0802 31.6799L19.0402 32.6399C19.1302 32.7299 19.2702 32.7299 19.3602 32.6399L23.8402 28.1599C23.9302 28.0699 24.0702 28.0699 24.1602 28.1599L28.6402 32.6399C28.7302 32.7299 28.8702 32.7299 28.9602 32.6399L29.9202 31.6799C30.0102 31.5899 30.0102 31.4499 29.9202 31.3599L25.4402 26.8799C25.3502 26.7899 25.3502 26.6499 25.4402 26.5599L29.9202 22.0799C30.0102 21.9899 30.0102 21.8499 29.9202 21.7599L28.9602 20.7999C28.8702 20.7099 28.7302 20.7099 28.6402 20.7999L24.1602 25.2799C24.0702 25.3699 23.9302 25.3699 23.8402 25.2799L19.3602 20.7999C19.2702 20.7099 19.1302 20.7099 19.0402 20.7999L18.0802 21.7599C17.9902 21.8499 17.9902 21.9899 18.0802 22.0799L22.5602 26.5599C22.6502 26.6499 22.6502 26.7899 22.5602 26.8799L18.0802 31.3599Z","#243142")),r.appendChild(M("M38.5001 9.5H9.50009C9.00009 9.5 8.59009 9.91 8.59009 10.41V15.85V37.6C8.59009 38.1 9.00009 38.51 9.50009 38.51H38.5001C39.0001 38.51 39.4101 38.1 39.4101 37.6V15.84V10.4C39.4101 9.91 39.0001 9.5 38.5001 9.5ZM37.5901 36.69H10.4101V16.75H37.6001V36.69H37.5901ZM37.5901 14.94H10.4101V11.32H37.6001V14.94H37.5901Z","#243142")),r.appendChild(M("M13.1202 14.03C13.6228 14.03 14.0302 13.6225 14.0302 13.12C14.0302 12.6174 13.6228 12.21 13.1202 12.21C12.6176 12.21 12.2102 12.6174 12.2102 13.12C12.2102 13.6225 12.6176 14.03 13.1202 14.03Z","#243142")),r.appendChild(M("M15.8402 14.03C16.3428 14.03 16.7502 13.6225 16.7502 13.12C16.7502 12.6174 16.3428 12.21 15.8402 12.21C15.3376 12.21 14.9302 12.6174 14.9302 13.12C14.9302 13.6225 15.3376 14.03 15.8402 14.03Z","#243142")),r.appendChild(M("M18.5601 14.03C19.0627 14.03 19.4701 13.6225 19.4701 13.12C19.4701 12.6174 19.0627 12.21 18.5601 12.21C18.0576 12.21 17.6501 12.6174 17.6501 13.12C17.6501 13.6225 18.0576 14.03 18.5601 14.03Z","#243142"))),r}function N(e,t){var r=u(),n=document.createElement("div");n.setAttribute("class","rvt-row rvt-m-lr-xxs");var o=document.createElement("div");o.setAttribute("class","rvt-cols-5");var a=document.createElement("label");a.setAttribute("class","rvt-ts-18 rvt-text-bold"),a.setAttribute("for",r),a.textContent=e,o.appendChild(a);var i=document.createElement("div");return i.setAttribute("class","rvt-cols-7"),i.setAttribute("id",r),i.textContent=t,n.appendChild(o),n.appendChild(i),n}function I(e){e.stopPropagation(),e.preventDefault(),window.location.reload()}function O(e,t,r){r.removeChild(t),window.requestAnimationFrame((function(){return window.requestAnimationFrame((function(){if(function(e){switch(e.tagName){case"A":return e.href&&e.href.length;case"INPUT":return"radio"!==e.type||e.checked;case"BUTTON":case"SELECT":case"TEXTAREA":return!0;default:return e.tabindex&&"-1"!==e.tabindex}}(e))e.focus();else{var t=Z(e);t&&t.length&&t[0].focus()}}))}))}function Z(e){var t=e.querySelectorAll('button, a[href], input[type="radio"]:checked, input:not([type="radio"]), select, textarea, [tabindex]:not([tabindex="-1"])');return Array.prototype.slice.call(t).filter((function(e){return!e.disabled}))}var R=document.getElementById("loading");function V(){R.style.display="block"}function D(){R.style.display="none"}function U(e){var t=document.createElement("div");if(e.modal){t.setAttribute("class","rvt-modal__inner"),t.setAttribute("data-rvt-modal-inner","true");var r=document.createElement("div");r.setAttribute("class","rvt-modal__header");var n=document.createElement("h1");n.setAttribute("id","error-modal-title"),n.setAttribute("class","rvt-modal__title"),e.status?P[e.status]?n.textContent="HTTP "+e.status+" - "+P[e.status]:k[e.status]?n.textContent="Web Socket "+e.status+" - "+k[e.status]:n.textContent="Error "+e.status:n.textContent="Internal Error",r.appendChild(n),t.appendChild(r);var o=document.createElement("div");o.setAttribute("class","rvt-bg-black-000 rvt-border-bottom");var a=document.createElement("div");a.setAttribute("class","rvt-container-sm rvt-prose rvt-flow");var i=document.createElement("div");i.setAttribute("class","rvt-row");var s=document.createElement("div");if(s.setAttribute("class","rvt-cols-10"),e.message||e.reload){if(e.message){var l=document.createElement("h2");l.setAttribute("class","rvt-ts-xs rvt-m-top-sm rvt-color-black-500 rvt-text-bold"),l.textContent=e.message,s.appendChild(l)}if(e.reload){var d=document.createElement("p");d.setAttribute("class","rvt-ts-xxs rvt-color-black-500"),e.reload&&d.appendChild(document.createTextNode(" Reload page to continue working.")),s.appendChild(d)}}i.appendChild(s);var c=document.createElement("div");c.setAttribute("class","rvt-cols-2 rvt-hide-md-down rvt-p-all-sm"),c.appendChild(H(e.status)),i.appendChild(c),a.appendChild(i),o.appendChild(a),t.appendChild(o)}else{var u=document.createElement("div");u.setAttribute("class","rvt-bg-black-000 rvt-border-bottom rvt-p-tb-xl");var p=document.createElement("div");p.setAttribute("class","rvt-container-sm rvt-prose rvt-flow");var v=document.createElement("div");v.setAttribute("class","rvt-row");var h=document.createElement("div");h.setAttribute("class","rvt-cols-9");var m=document.createElement("h1");if(m.setAttribute("class","rvt-m-bottom-md"),e.status)if(P[e.status]){var C=document.createElement("p");C.setAttribute("class","rvt-ts-xs rvt-color-crimson rvt-text-uppercase rvt-m-top-xs rvt-m-bottom-none rvt-p-all-none"),C.textContent="HTTP "+e.status,h.appendChild(C),m.textContent=P[e.status]}else m.textContent="HTTP "+e.status;else m.textContent="Internal Error";if(h.appendChild(m),e.message||e.reload){var f=document.createElement("p");f.setAttribute("class","rvt-ts-18 rvt-color-black-500 rvt-width-xxl"),e.message&&f.appendChild(document.createTextNode(e.message)),e.reload&&f.appendChild(document.createTextNode(" Reload page to continue working.")),h.appendChild(f)}v.appendChild(h);var b=document.createElement("div");b.setAttribute("class","rvt-cols-3 rvt-hide-md-down"),b.appendChild(H(e.status)),v.appendChild(b),p.appendChild(v),u.appendChild(p),t.appendChild(u)}if(e.severe){var g=document.createElement("div");g.setAttribute("class","rvt-inline-alert rvt-inline-alert--standalone rvt-inline-alert--danger rvt-m-top-none"),document.createElement("span").setAttribute("class","rvt-inline-alert__icon");var y=document.createElement(e.modal?"span":"p");y.setAttribute("class","rvt-inline-alert__message"),y.appendChild(document.createTextNode("If you continue to receive this message, contact "+(e.supportPreText||"the ")));var w=document.createElement("a");w.href=e.supportUrl||"http://kb.iu.edu/data/abxl.html",w.textContent=e.supportLabel||"IU Support Center",y.appendChild(w),y.appendChild(document.createTextNode(" and include the error details below.")),g.appendChild(y),t.appendChild(g)}var A=document.createElement("div");if(A.appendChild(N("Current Time",(new Date).toString())),e.requestNumber&&A.appendChild(N("Request #",e.requestNumber)),e.nodeId&&A.appendChild(N("Node",e.nodeId)),e.modal){if(A.setAttribute("class","rvt-modal__body"),t.appendChild(A),e.closeModal){var x=document.createElement("button");if(x.setAttribute("role","button"),x.onclick=e.closeModal,e.reload){x.setAttribute("class","rvt-button");var E=document.createElement("span");E.textContent="Reload Page",x.appendChild(E);var L=document.createElement("div");L.setAttribute("class","rvt-modal__controls"),L.appendChild(x),t.appendChild(L)}else{x.setAttribute("class","rvt-button rvt-button--plain rvt-modal__close");var S=document.createElement("span");e.reload||S.setAttribute("class","rvt-sr-only"),S.textContent="Close",x.appendChild(S);var T=document.createElementNS("http://www.w3.org/2000/svg","svg");T.setAttribute("role","img"),T.setAttribute("width","16"),T.setAttribute("height","16"),T.setAttribute("viewBox","0 0 16 16");var M=document.createElementNS("http://www.w3.org/2000/svg","path");M.setAttribute("fill","currentColor"),M.setAttribute("d","M9.41,8l5.29-5.29a1,1,0,0,0-1.41-1.41L8,6.59,2.71,1.29A1,1,0,0,0,1.29,2.71L6.59,8,1.29,13.29a1,1,0,1,0,1.41,1.41L8,9.41l5.29,5.29a1,1,0,0,0,1.41-1.41Z"),T.appendChild(M),x.appendChild(T),t.appendChild(x)}}}else{var I=document.createElement("div");I.setAttribute("class","rvt-shadow-subtle rvt-p-all-md rvt-m-tb-md rvt-m-lr-xxl-md-up rvt-m-lr-md-xs-up"),document.createElement("div").setAttribute("class","rvt-card rvt-card--raised rvt-m-lr-xl-md-up");var O=document.createElement("div");O.setAttribute("class","rvt-card__body");var Z=document.createElement("h2");Z.setAttribute("class","rvt-card__title"),Z.textContent="Error Details",O.appendChild(Z),I.appendChild(A),t.appendChild(I)}return t}function q(e,t){var r=document.activeElement,n=document.querySelector("body"),o=document.createElement("div");o.className="rvt-scope";var a=document.createElement("section");a.setAttribute("id","error-dialog"),a.setAttribute("class","rvt-modal"),a.setAttribute("id","error-modal"),a.setAttribute("aria-labelledby","error-modal-title"),a.setAttribute("data-rvt-modal","error-modal"),a.setAttribute("role","dialog"),a.setAttribute("tabindex","-1"),a.addEventListener("keydown",(function(e){var i,s,l,d,c,u,p,v,h,m;"Escape"===e.key&&(t?I(e):O(r,o,n)),"Tab"===e.key&&(s=a,l=(i=e).shiftKey,v=(d=i.target)===(u=(c=Z(s))[0]),h=d===(p=c[c.length-1]),m=d===s,i.stopPropagation(),(v||m)&&l?(i.preventDefault(),p&&p.focus()):!h&&!m||l||(i.preventDefault(),u&&u.focus()))}));var i={};for(var s in e)i[s]=e[s];return i.modal=!0,i.closeModal=function(e){t?I(e):O(r,o,n)},i.reload=t,a.appendChild(RivetError(i)),a.style.display="block",o.appendChild(a),n.appendChild(o),a.focus(),function(){return O(r,o,n)}}!R&&document.body&&((R=document.createElement("div")).setAttribute("id","loading"),R.style.position="fixed",R.style.display="none",R.setAttribute("class","rvt-loader rvt-loader--sm"),R.style.top="5.5rem",R.style.right="0.5rem",document.body.appendChild(R));var _=new d;function j(e){_.subscribe(e)}var F=function(){function e(t,r,n,o){i(this,e),this.url=A(t,r,n),this.reload=!!o}return l(e,[{key:"send",value:function(e,t,r){var n,o=this,a=new XMLHttpRequest,i=new d,s=this.url;if("POST"===e||"PUT"===e)a.open(e,this.url),r&&a.setRequestHeader("Content-Type",r);else{if(t){var l=new URLSearchParams(t);s=s.search?new URL(s+"&"+l):new URL(s+"?"+l)}a.open(e,s),t=null}return a.onreadystatechange=function(){switch(a.readyState){case 2:a.getAllResponseHeaders().trim().split(/[\r\n]+/).forEach((function(e){0===e.toLowerCase().indexOf("content-type: ")&&(n=e.substring(14))}));break;case 4:a.status>=400?function(){var n;try{if(a.responseText)if(-1!==a.responseText.indexOf("<html")){var l=document.createElement("html");l.outerHTML=a.responseText;var d=l.querySelectorAll("body>script");if(d)for(var c=d.length-1;c>=0;c--){var u=d.item(c);try{var p=u.textContent;p&&p.startsWith("renderError({")&&p.endsWith("})")&&(n=JSON.parse(p.slice(12,p.length-1)))}catch(e){i.error(e)}}}else n=JSON.parse(response.responseText)}catch(e){i.error(e)}n||(n={status:a.status}),n.reload=o.reload,_.next({request:{url:s,method:e,data:t,contentType:r},stop:!0,error:n})}():function(){var o;try{var l=a.responseText;if("application/json"===n)o=JSON.parse(l);else if("text/html"===n){var d=document.createElement("html");d.outerHTML=a.responseText,o=d}i.next(o),T(o),_.next({xhr:a,request:{url:s,method:e,data:t,contentType:r},stop:!0})}catch(n){i.error(n),_.next({xhr:a,request:{url:s,method:e,data:t,contentType:r},error:{message:"An internal error has occurred.",severe:!0,reload},stop:!0})}}(),i.complete()}},_.next({xhr:a,request:{url:s,method:e,data:t,contentType:r},start:!0}),a.send(t),i}},{key:"get",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.send("GET",e,t,r)}},{key:"post",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.send("POST",e,t,r)}},{key:"put",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.send("PUT",e,t,r)}},{key:"patch",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.send("PATCH",e,t,r)}},{key:"delete",value:function(e,t){var r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return this.send("DELETE",e,t,r)}}]),e}();function J(e,t,r){return new F(e).get(t,null,r)}function B(e,t,r){return new F(e).post(JSON.stringify(t),"application/json",r)}function G(e,t,r){return new F(e).post(t,null,r)}function W(e,t,r){return new F(e).put(JSON.stringify(t),"application/json",r)}function K(e,t,r){return new F(e).delete(t,null,r)}var X=new d,z=function(){function e(t){var r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e5;i(this,e),this.uri=t,this.pingInterval=r,this.pendingMessages=[],this.online=!1,this.connect()}return l(e,[{key:"sendPendingMessages",value:function(){var e=this.socket,t=this.pendingMessages;!e||e.readyState>WebSocket.OPEN?errorDialog({message:"A internal error has occurred (invalid socket state).",nodeId:environment.nodeId,severe:!0,reload:!0}):t.splice(0).forEach((function(t){return e.send(JSON.stringify(t))}))}},{key:"ping",value:function(){var e=this.socket;!e||e.readyState>WebSocket.OPEN?errorDialog({message:"A internal error has occurred (invalid socket state).",nodeId:environment.nodeId,severe:!0,reload:!0}):(this.nonce=shortuid(),e.send(JSON.stringify({message:{nodeId:environment.nodeId,nonce:this.nonce},type:"ClientPing"})))}},{key:"send",value:function(e){var t=this.online,r=this.pendingMessages,n=this.socket;t?n.send(JSON.stringify(e)):r.push(e)}},{key:"handleServerPing",value:function(e){e.nodeId!==environment.nodeId?errorDialog({message:"A internal error has occurred (node mismatch).",nodeId:environment.nodeId,severe:!0,reload:!0}):e.nonce!==environment.nonce?errorDialog({message:"A internal error has occurred (nonce mismatch).",nodeId:environment.nodeId,severe:!0,reload:!0}):(this.nonce=null,this.handleStatus(e))}},{key:"handleStatus",value:function(e){this.online=e.online,e.online?(this.closeOfflineDialog&&(this.closeOfflineDialog(),delete this.closeOfflineDialog),this.sendPendingMessages()):this.closeOfflineDialog=errorDialog({message:"This service is temporarily down for maintenance. Please try again later.",nodeId:environment.nodeId,status:503})}},{key:"connect",value:function(){var e=this,t=this.socket,r=t&&setTimeout((function(){t.close(),t=null}),15e3),n=new WebSocket(this.uri);n.addEventListener("open",(function(){e.ping(),e.pingInterval>0&&(e.pingTimer=setInterval((function(){return e.ping()}),e.pingInterval))})),n.addEventListener("message",(function(n){var o=JSON.parse(n.data);o&&(o.error?X.next({websocket:{uri:e.uri,online:e.online},error:o.error}):"ServerPing"===o.type?(e.handleServerPing(o.message),t&&(r&&clearTimeout(r),t.close())):"ServerStatus"===o.type?e.handleStatus(o.message):"SocketReconnect"===o.type?e.connect():(X.next({websocket:{uri:e.uri,online:e.online},message:o}),T.next(o)))})),n.addEventListener("close",(function(t){e.pingTimer&&n===e.socket&&(clearInterval(e.pingTimer),delete e.pingTimer),t.wasClean||errorDialog({message:"Connection closed unexpectedly. "+t.reason,status:t.code,nodeId:environment.nodeId,severe:!0,reload:!0})})),this.socket=n}}]),e}(),Q={};function Y(e){X.subscribe(e)}function $(e,t){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3e5,n=arguments.length>3?arguments[3]:void 0,o=getUrl(e,null,n).replace(/^http/,"ws"),a=Q[o];a||(a=new z(o,r)),a.send(t)}if(window.Rivet){var ee=function(e){e.start&&V(),e.stop&&D(),e.error&&n.errorDialog(e.error)};j(ee),Y(ee)}window.iu={EventStream:d,util:t,environment:r,rivet:n,rest:o,websocket:a}})();
//# sourceMappingURL=iu.js.map